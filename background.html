<script>
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
	switch (request.command){
		case 'openAllBookmarksInNewWindow':
			var urls = request.data;
			chrome.windows.create({
				url: urls.shift()
			}, function(w){
				var id = w.id;
				for (var i=0, l=urls.length; i<l; i++){
					chrome.tabs.create({
						windowId: id,
						url: urls[i],
						selected: false
					});
				}
			});
			break;
		case 'openAllBookmarksInIncognitoWindow':
			var urls = request.data;
			chrome.windows.create({
				url: urls.shift(),
				incognito: true
			}, function(w){
				var id = w.id;
				for (var i=0, l=urls.length; i<l; i++){
					chrome.tabs.create({
						windowId: id,
						url: urls[i],
						selected: false
					});
				}
			});
			break;
	}
});
</script>
<!--
<script>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-279900-12']);
_gaq.push(['_trackPageview']);

(function(){
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = 'https://ssl.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
-->